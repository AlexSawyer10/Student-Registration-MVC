@using StudentRegistration.Shared.Models.API
@model List<StudentRegistration.Shared.Models.API.Enrollment>

@{
    ViewData["Title"] = "Enrollments";
}

<h2>Enrollments</h2>
@if (TempData["Message"] != null)
{
    <div class="alert alert-success">@TempData["Message"]</div>
}


<table class="table table-striped table-bordered align-middle">
    <thead class="table-light">
    <tr>
        <th>Enrollment ID</th>
        <th>STUDENT ID</th>
        <th>COURSE ID</th>
        <th>GRADE</th>
     
    </tr>
    </thead>
    <tbody>
    @for (int i = 0; i < Model.Count; ++i)
    {
        String formId = $"enrollment-form_{i}";
        Enrollment enrollment = Model[i];

        <tr>
            <td>
                <input type="hidden" name="ENROLLMENT_ID" value="@enrollment.ENROLLMENT_ID" form="@formId"/> 
            </td>
            <td>
                @enrollment.STUDENT_ID
            </td>
            <td>
                @enrollment.COURSE_ID
            </td>
            <td>
                @enrollment.GRADE
            </td>

            <td class="d-flex justify-content-end gap-2">
                <a asp-controller="Enrollment"
                   asp-action="Detail"
                   asp-route-enrollmentId="@enrollment.ENROLLMENT_ID">
                    Edit
                </a>

                <form asp-action="Delete" asp-controller="Enrollment" method="post">
                    <input type="hidden" name="enrollmentId" value="@enrollment.ENROLLMENT_ID"/>
                    <button type="submit" class="btn btn-sm btn-danger">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
    }

    <tr>
        <td>
            <span class="text-muted">Auto</span>
        
        <td>
            <input class="form-control" placeholder="" name="STUDENT_ID" form="create-enrollment-form" required/>
        </td>
        <td>
            <input class="form-control"  placeholder="" name="COURSE_ID" form="create-enrollment-form" required/> 
        </td>
        <td>
            <input class="form-control"  placeholder="" name="GRADE"  form="create-enrollment-form" type="number" step="0.01"/>  @*REMEMBER GRADE CAN BE OPTIONAL*@
        </td>
        
        <td class="text-end">
            <form id="create-enrollment-form" asp-action="CreateEnrollment" asp-controller="Enrollment" method="post">
                <button type="submit" class="btn btn-sm btn-success">Create</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
